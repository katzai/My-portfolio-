<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - GitHub Auto-Sync</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #FFFFFF;
            --bg-secondary: #F8F9FA;
            --text-primary: #1A1A1A;
            --text-secondary: #6B6B6B;
            --accent: #6366F1;
            --danger: #EF4444;
            --success: #10B981;
            --warning: #F59E0B;
            --border: #E5E7EB;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-secondary);
            color: var(--text-primary);
            line-height: 1.6;
        }

        /* Login Screen */
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .login-box {
            background: white;
            border-radius: 16px;
            padding: 60px;
            max-width: 450px;
            width: 100%;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
        }

        .login-title {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 12px;
            text-align: center;
            color: var(--accent);
        }

        .login-subtitle {
            color: var(--text-secondary);
            text-align: center;
            margin-bottom: 40px;
            font-size: 15px;
        }

        .keypad-display {
            background: var(--bg-secondary);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            font-family: 'Courier New', monospace;
            font-size: 32px;
            letter-spacing: 12px;
            margin-bottom: 30px;
            min-height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent);
        }

        .keypad-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .keypad-btn {
            background: white;
            border: 2px solid var(--border);
            border-radius: 10px;
            padding: 20px;
            font-size: 24px;
            font-weight: 600;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .keypad-btn:hover {
            background: var(--bg-secondary);
            border-color: var(--accent);
        }

        .keypad-btn:active {
            transform: scale(0.95);
        }

        .clear-btn {
            background: var(--danger);
            color: white;
            border: none;
        }

        .clear-btn:hover {
            background: #DC2626;
        }

        /* GitHub Setup Banner */
        .github-setup-banner {
            background: linear-gradient(135deg, var(--warning) 0%, #F97316 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            display: none;
        }

        .github-setup-banner.show {
            display: block;
        }

        .github-setup-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .github-setup-text {
            font-size: 14px;
            margin-bottom: 16px;
            opacity: 0.95;
        }

        .github-setup-btn {
            background: white;
            color: var(--warning);
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .github-setup-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        /* Admin Panel */
        .admin-panel {
            display: none;
            min-height: 100vh;
            padding: 20px;
        }

        .admin-header {
            background: white;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            flex-wrap: wrap;
            gap: 20px;
        }

        .admin-title {
            font-size: 28px;
            font-weight: 800;
            color: var(--accent);
        }

        .admin-actions {
            display: flex;
            gap: 10px;
        }

        .logout-btn, .sync-btn {
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
        }

        .logout-btn {
            background: var(--danger);
            color: white;
        }

        .sync-btn {
            background: var(--success);
            color: white;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sync-btn:hover, .logout-btn:hover {
            transform: translateY(-2px);
        }

        .sync-btn.syncing {
            background: var(--warning);
            pointer-events: none;
        }

        .sync-icon {
            display: inline-block;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .stat-icon {
            font-size: 28px;
        }

        .stat-badge {
            background: var(--success);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
        }

        .stat-badge.warning {
            background: var(--warning);
        }

        .stat-number {
            font-size: 36px;
            font-weight: 800;
            color: var(--accent);
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 13px;
            color: var(--text-secondary);
        }

        /* Admin Grid */
        .admin-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 30px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .admin-section {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-icon {
            font-size: 24px;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 15px;
            font-family: 'Inter', sans-serif;
            transition: all 0.2s;
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--accent);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 15px;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            background: #4F46E5;
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        /* Image Upload */
        .image-upload-area {
            border: 3px dashed var(--border);
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 20px;
        }

        .image-upload-area:hover {
            border-color: var(--accent);
            background: var(--bg-secondary);
        }

        .upload-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }

        .upload-text {
            font-size: 16px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .upload-hint {
            font-size: 13px;
            color: var(--text-secondary);
        }

        /* Image Gallery */
        .image-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 16px;
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
            padding: 10px;
            border: 1px solid var(--border);
            border-radius: 8px;
        }

        .gallery-item {
            position: relative;
            aspect-ratio: 1;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid var(--border);
        }

        .gallery-item:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .gallery-item-actions {
            position: absolute;
            top: 5px;
            right: 5px;
            display: flex;
            gap: 5px;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .gallery-item:hover .gallery-item-actions {
            opacity: 1;
        }

        .gallery-action-btn {
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            padding: 6px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        /* Project Cards List */
        .items-list {
            max-height: 500px;
            overflow-y: auto;
            margin-top: 20px;
        }

        .item-card {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            border: 2px solid var(--border);
            transition: all 0.2s;
        }

        .item-card:hover {
            border-color: var(--accent);
            transform: translateX(5px);
        }

        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 12px;
        }

        .item-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .item-type {
            background: var(--accent);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .item-description {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 12px;
            line-height: 1.6;
        }

        .item-images {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }

        .item-image-preview {
            width: 60px;
            height: 60px;
            border-radius: 6px;
            object-fit: cover;
            border: 2px solid var(--border);
        }

        .item-actions {
            display: flex;
            gap: 10px;
        }

        .item-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .item-btn-edit {
            background: var(--accent);
            color: white;
        }

        .item-btn-delete {
            background: var(--danger);
            color: white;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            padding: 20px;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 700;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: var(--text-secondary);
        }

        /* Cropper */
        .cropper-container-wrapper {
            max-height: 500px;
            margin-bottom: 20px;
        }

        .cropper-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        /* Image Selection Grid */
        .image-selection-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        .selectable-image {
            position: relative;
            aspect-ratio: 1;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.2s;
        }

        .selectable-image:hover {
            transform: scale(1.05);
        }

        .selectable-image.selected {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        }

        .selectable-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .image-check {
            position: absolute;
            top: 5px;
            right: 5px;
            background: var(--accent);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .selectable-image.selected .image-check {
            display: flex;
        }

        /* Success/Error Messages */
        .message {
            padding: 16px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
            animation: slideIn 0.3s ease;
        }

        .message.show {
            display: block;
        }

        .message.success {
            background: var(--success);
            color: white;
        }

        .message.error {
            background: var(--danger);
            color: white;
        }

        .message.warning {
            background: var(--warning);
            color: white;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Info Box */
        .info-box {
            background: #EFF6FF;
            border: 2px solid #3B82F6;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .info-box-title {
            font-weight: 700;
            color: #1E40AF;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-box-text {
            font-size: 14px;
            color: #1E40AF;
            line-height: 1.6;
        }

        .info-box-text code {
            background: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .admin-grid {
                grid-template-columns: 1fr;
            }

            .admin-header {
                flex-direction: column;
                text-align: center;
            }

            .modal-content {
                padding: 30px 20px;
            }

            .login-box {
                padding: 40px 30px;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div class="login-container" id="loginScreen">
        <div class="login-box">
            <h1 class="login-title">üîê Admin Access</h1>
            <p class="login-subtitle">Enter your PIN to continue</p>
            
            <div class="keypad-display" id="pinDisplay">‚Ä¢‚Ä¢‚Ä¢‚Ä¢</div>
            
            <div class="keypad-grid">
                <button class="keypad-btn" onclick="addPin('1')">1</button>
                <button class="keypad-btn" onclick="addPin('2')">2</button>
                <button class="keypad-btn" onclick="addPin('3')">3</button>
                <button class="keypad-btn" onclick="addPin('4')">4</button>
                <button class="keypad-btn" onclick="addPin('5')">5</button>
                <button class="keypad-btn" onclick="addPin('6')">6</button>
                <button class="keypad-btn" onclick="addPin('7')">7</button>
                <button class="keypad-btn" onclick="addPin('8')">8</button>
                <button class="keypad-btn" onclick="addPin('9')">9</button>
                <button class="keypad-btn clear-btn" onclick="clearPin()">Clear</button>
                <button class="keypad-btn" onclick="addPin('0')">0</button>
                <button class="keypad-btn" onclick="checkPin()">Enter</button>
            </div>
        </div>
    </div>

    <!-- Admin Panel -->
    <div class="admin-panel" id="adminPanel">
        <div class="admin-header">
            <h1 class="admin-title">üìä Portfolio Admin Panel</h1>
            <div class="admin-actions">
                <button class="sync-btn" id="syncBtn" onclick="syncToGitHub()">
                    <span id="syncIcon">üîÑ</span>
                    <span id="syncText">Sync to GitHub</span>
                </button>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>
        </div>

        <!-- GitHub Setup Banner -->
        <div class="github-setup-banner" id="githubSetupBanner">
            <div class="github-setup-title">
                ‚ö†Ô∏è GitHub Setup Required
            </div>
            <div class="github-setup-text">
                To automatically save projects to GitHub, you need to configure your repository settings.
            </div>
            <button class="github-setup-btn" onclick="showGitHubSetupModal()">Configure GitHub</button>
        </div>

        <div id="messageContainer"></div>

        <!-- Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-header">
                    <span class="stat-icon">üíº</span>
                    <span class="stat-badge" id="projectsSyncStatus">Local</span>
                </div>
                <div class="stat-number" id="projectCount">0</div>
                <div class="stat-label">Projects</div>
            </div>
            <div class="stat-card">
                <div class="stat-header">
                    <span class="stat-icon">üìû</span>
                    <span class="stat-badge" id="contactsSyncStatus">Local</span>
                </div>
                <div class="stat-number" id="contactCount">0</div>
                <div class="stat-label">Contacts</div>
            </div>
            <div class="stat-card">
                <div class="stat-header">
                    <span class="stat-icon">üñºÔ∏è</span>
                    <span class="stat-badge warning" id="imagesSyncStatus">Local</span>
                </div>
                <div class="stat-number" id="imageCount">0</div>
                <div class="stat-label">Images</div>
            </div>
        </div>

        <div class="admin-grid">
            <!-- Projects Section -->
            <div class="admin-section">
                <h2 class="section-title"><span class="section-icon">üíº</span> Projects</h2>
                
                <div class="info-box">
                    <div class="info-box-title">‚ÑπÔ∏è Auto-Save to GitHub</div>
                    <div class="info-box-text">
                        When you add/edit projects, they're saved locally first. Click "Sync to GitHub" to push all changes to your repository. Each project gets its own folder with images and data.json.
                    </div>
                </div>

                <button class="btn btn-primary" onclick="showAddProjectModal()" style="margin-bottom: 20px;">
                    ‚ûï Add New Project
                </button>
                
                <div class="items-list" id="projectsList"></div>
            </div>

            <!-- Contacts Section -->
            <div class="admin-section">
                <h2 class="section-title"><span class="section-icon">üìû</span> Contacts</h2>
                <button class="btn btn-primary" onclick="showAddContactModal()" style="margin-bottom: 20px;">
                    ‚ûï Add New Contact
                </button>
                
                <div class="items-list" id="contactsList"></div>
            </div>

            <!-- Image Management -->
            <div class="admin-section">
                <h2 class="section-title"><span class="section-icon">üñºÔ∏è</span> Image Library</h2>
                
                <div class="form-group">
                    <label class="form-label">Upload Images</label>
                    <div class="image-upload-area" onclick="document.getElementById('imageInput').click()">
                        <div class="upload-icon">üì∏</div>
                        <div class="upload-text">Click to upload images</div>
                        <div class="upload-hint">Auto-cropped to portrait (9:12 ratio) ‚Ä¢ Saved to project folders</div>
                    </div>
                    <input type="file" id="imageInput" accept="image/*" multiple style="display: none;" onchange="handleImageUpload(event)">
                </div>

                <div class="image-gallery" id="imageGallery"></div>
            </div>
        </div>
    </div>

    <!-- GitHub Setup Modal -->
    <div class="modal" id="githubSetupModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Configure GitHub Integration</h2>
                <button class="modal-close" onclick="closeModal('githubSetupModal')">√ó</button>
            </div>

            <div class="info-box">
                <div class="info-box-title">üìò How to get your GitHub Token</div>
                <div class="info-box-text">
                    1. Go to GitHub Settings ‚Üí Developer settings ‚Üí Personal access tokens<br>
                    2. Click "Generate new token (classic)"<br>
                    3. Select scope: <code>repo</code> (Full control of private repositories)<br>
                    4. Copy the token and paste below
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">GitHub Username</label>
                <input type="text" class="form-input" id="githubUsername" placeholder="yourusername">
            </div>

            <div class="form-group">
                <label class="form-label">Repository Name</label>
                <input type="text" class="form-input" id="githubRepo" placeholder="portfolio">
            </div>

            <div class="form-group">
                <label class="form-label">Branch</label>
                <input type="text" class="form-input" id="githubBranch" value="main" placeholder="main">
            </div>

            <div class="form-group">
                <label class="form-label">Personal Access Token</label>
                <input type="password" class="form-input" id="githubToken" placeholder="ghp_xxxxxxxxxxxx">
            </div>

            <div style="display: flex; gap: 10px;">
                <button class="btn btn-secondary" onclick="testGitHubConnection()" style="flex: 1;">üîç Test Connection</button>
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 10px;">
                <button class="btn btn-danger" onclick="closeModal('githubSetupModal')">Cancel</button>
                <button class="btn btn-success" onclick="saveGitHubConfig()">Save Configuration</button>
            </div>
        </div>
    </div>

    <!-- Crop Image Modal -->
    <div class="modal" id="cropModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Crop Image for Project Card</h2>
                <button class="modal-close" onclick="closeModal('cropModal')">√ó</button>
            </div>
            <div class="cropper-container-wrapper">
                <img id="cropImage" style="max-width: 100%;">
            </div>
            <div class="form-group">
                <label class="form-label">Image Name</label>
                <input type="text" class="form-input" id="croppedImageName" placeholder="image-name.jpg">
            </div>
            <div class="cropper-buttons">
                <button class="btn btn-danger" onclick="closeModal('cropModal')">Cancel</button>
                <button class="btn btn-success" onclick="saveCroppedImage()">Save Cropped Image</button>
            </div>
        </div>
    </div>

    <!-- Add/Edit Project Modal -->
    <div class="modal" id="projectModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="projectModalTitle">Add New Project</h2>
                <button class="modal-close" onclick="closeModal('projectModal')">√ó</button>
            </div>
            
            <div class="form-group">
                <label class="form-label">Project Title</label>
                <input type="text" class="form-input" id="projectTitle" placeholder="e.g., AI Chatbot">
            </div>

            <div class="form-group">
                <label class="form-label">Project Type</label>
                <input type="text" class="form-input" id="projectType" placeholder="e.g., Web Development">
            </div>

            <div class="form-group">
                <label class="form-label">Description</label>
                <textarea class="form-textarea" id="projectDescription" placeholder="Describe your project..."></textarea>
            </div>

            <div class="form-group">
                <label class="form-label">Project Link (Optional)</label>
                <input type="text" class="form-input" id="projectLink" placeholder="https://...">
            </div>

            <div class="form-group">
                <label class="form-label">Select Images</label>
                <div class="image-selection-grid" id="projectImageSelection"></div>
            </div>

            <div style="display: flex; gap: 10px;">
                <button class="btn btn-danger" onclick="closeModal('projectModal')">Cancel</button>
                <button class="btn btn-success" onclick="saveProject()">Save Project</button>
            </div>
        </div>
    </div>

    <!-- Add/Edit Contact Modal -->
    <div class="modal" id="contactModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="contactModalTitle">Add New Contact</h2>
                <button class="modal-close" onclick="closeModal('contactModal')">√ó</button>
            </div>
            
            <div class="form-group">
                <label class="form-label">Contact Icon (Emoji)</label>
                <input type="text" class="form-input" id="contactIcon" placeholder="üìß">
            </div>

            <div class="form-group">
                <label class="form-label">Contact Label</label>
                <input type="text" class="form-input" id="contactLabel" placeholder="e.g., Email">
            </div>

            <div class="form-group">
                <label class="form-label">Contact Value</label>
                <input type="text" class="form-input" id="contactValue" placeholder="your.email@example.com">
            </div>

            <div class="form-group">
                <label class="form-label">Contact Link</label>
                <input type="text" class="form-input" id="contactLink" placeholder="mailto:your.email@example.com">
            </div>

            <div style="display: flex; gap: 10px;">
                <button class="btn btn-danger" onclick="closeModal('contactModal')">Cancel</button>
                <button class="btn btn-success" onclick="saveContact()">Save Contact</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
    <script>
        // Cross-Browser Polyfills for Instagram/LinkedIn in-app browsers
        // Polyfill for Promise.allSettled (not available in older browsers)
        if (!Promise.allSettled) {
            Promise.allSettled = function(promises) {
                return Promise.all(promises.map(function(promise) {
                    return Promise.resolve(promise).then(
                        function(value) { return { status: 'fulfilled', value: value }; },
                        function(reason) { return { status: 'rejected', reason: reason }; }
                    );
                }));
            };
        }
        
        // Polyfill for String.prototype.repeat (Instagram browser issue)
        if (!String.prototype.repeat) {
            String.prototype.repeat = function(count) {
                if (this == null) throw new TypeError();
                var str = '' + this;
                count = +count;
                if (count != count) count = 0;
                if (count < 0) throw new RangeError();
                if (count == Infinity) throw new RangeError();
                count = Math.floor(count);
                if (str.length == 0 || count == 0) return '';
                var result = '';
                while (count--) { result += str; }
                return result;
            };
        }
        
        // Polyfill for Array.from (for older browsers)
        if (!Array.from) {
            Array.from = function(arrayLike) {
                return Array.prototype.slice.call(arrayLike);
            };
        }
        
        // Safe fetch wrapper for Instagram/LinkedIn browsers
        function safeFetch(url, options) {
            return new Promise(function(resolve, reject) {
                // Set timeout for slow connections
                var timeout = setTimeout(function() {
                    reject(new Error('Request timeout'));
                }, 30000); // 30 seconds
                
                safeFetch(url, options)
                    .then(function(response) {
                        clearTimeout(timeout);
                        resolve(response);
                    })
                    .catch(function(error) {
                        clearTimeout(timeout);
                        reject(error);
                    });
            });
        }
        
        // Configuration
        const ADMIN_PIN = '1234';
        let currentPin = '';
        let cropper = null;
        let currentImageForCrop = null;
        let editingProjectIndex = -1;
        let editingContactIndex = -1;

        // Storage Keys
        const STORAGE_KEYS = {
            projects: 'portfolioProjects',
            contacts: 'portfolioContacts',
            images: 'portfolioImages',
            githubConfig: 'githubConfig'
        };

        // Initialize
        function init() {
            loadProjects();
            loadContacts();
            loadImages();
            updateStats();
            checkGitHubConfig();
        }

        // PIN Functions
        function addPin(digit) {
            if (currentPin.length < 4) {
                currentPin += digit;
                updatePinDisplay();
            }
        }

        function clearPin() {
            currentPin = '';
            updatePinDisplay();
        }

        function updatePinDisplay() {
            var display = document.getElementById('pinDisplay');
            // Use polyfilled repeat function for cross-browser compatibility
            display.textContent = '‚Ä¢'.repeat(currentPin.length) + '‚óã'.repeat(4 - currentPin.length);
        }

        function checkPin() {
            if (currentPin === ADMIN_PIN) {
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('adminPanel').style.display = 'block';
                init();
            } else {
                showMessage('Incorrect PIN', 'error');
                clearPin();
            }
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                document.getElementById('loginScreen').style.display = 'flex';
                document.getElementById('adminPanel').style.display = 'none';
                clearPin();
            }
        }

        // GitHub Configuration
        function checkGitHubConfig() {
            const config = getGitHubConfig();
            if (!config.username || !config.repo || !config.token) {
                document.getElementById('githubSetupBanner').classList.add('show');
                updateSyncStatus('warning');
            } else {
                updateSyncStatus('success');
            }
        }

        function getGitHubConfig() {
            try {
                const config = localStorage.getItem(STORAGE_KEYS.githubConfig);
                return config ? JSON.parse(config) : {};
            } catch (e) {
                return {};
            }
        }

        function showGitHubSetupModal() {
            const config = getGitHubConfig();
            document.getElementById('githubUsername').value = config.username || '';
            document.getElementById('githubRepo').value = config.repo || '';
            document.getElementById('githubBranch').value = config.branch || 'main';
            document.getElementById('githubToken').value = config.token || '';
            document.getElementById('githubSetupModal').classList.add('active');
        }

        function saveGitHubConfig() {
            const config = {
                username: document.getElementById('githubUsername').value.trim(),
                repo: document.getElementById('githubRepo').value.trim(),
                branch: document.getElementById('githubBranch').value.trim() || 'main',
                token: document.getElementById('githubToken').value.trim()
            };

            if (!config.username || !config.repo || !config.token) {
                showMessage('Please fill in all required fields', 'error');
                return;
            }

            localStorage.setItem(STORAGE_KEYS.githubConfig, JSON.stringify(config));
            closeModal('githubSetupModal');
            document.getElementById('githubSetupBanner').classList.remove('show');
            showMessage('GitHub configuration saved successfully!', 'success');
            updateSyncStatus('success');
        }

        // Test GitHub Connection (new feature for cross-browser debugging)
        function testGitHubConnection() {
            var username = document.getElementById('githubUsername').value.trim();
            var repo = document.getElementById('githubRepo').value.trim();
            var token = document.getElementById('githubToken').value.trim();
            
            if (!username || !repo || !token) {
                showMessage('Please enter username, repository and token first', 'error');
                return;
            }
            
            showMessage('Testing GitHub connection...', 'warning');
            
            // Test by fetching repository info
            safeFetch('https://api.github.com/repos/' + username + '/' + repo, {
                method: 'GET',
                headers: {
                    'Authorization': 'token ' + token,
                    'Accept': 'application/vnd.github.v3+json'
                }
            })
            .then(function(response) {
                if (!response.ok) {
                    return response.json().then(function(err) {
                        throw new Error(err.message || 'Connection failed: ' + response.status);
                    });
                }
                return response.json();
            })
            .then(function(repoData) {
                showMessage('‚úÖ Connection successful! Repository: ' + repoData.full_name, 'success');
            })
            .catch(function(error) {
                var errorMsg = '‚ùå Connection failed: ';
                
                if (error.message.includes('fetch') || error.message.includes('Failed to fetch')) {
                    errorMsg += 'Network error. Check your internet connection.';
                } else if (error.message.includes('404')) {
                    errorMsg += 'Repository not found. Check username and repo name.';
                } else if (error.message.includes('401') || error.message.includes('Bad credentials')) {
                    errorMsg += 'Invalid token. Generate a new Personal Access Token.';
                } else if (error.message.includes('403')) {
                    errorMsg += 'Token lacks permissions. Make sure it has "repo" access.';
                } else {
                    errorMsg += error.message;
                }
                
                showMessage(errorMsg, 'error');
            });
        }

        function updateSyncStatus(status) {
            const badges = ['projectsSyncStatus', 'contactsSyncStatus', 'imagesSyncStatus'];
            badges.forEach(id => {
                const badge = document.getElementById(id);
                if (status === 'success') {
                    badge.textContent = 'Synced';
                    badge.className = 'stat-badge';
                } else if (status === 'warning') {
                    badge.textContent = 'Local';
                    badge.className = 'stat-badge warning';
                }
            });
        }

        // Sync to GitHub
        function syncToGitHub() {
            const config = getGitHubConfig();
            
            if (!config.username || !config.repo || !config.token) {
                showMessage('Please configure GitHub settings first', 'error');
                showGitHubSetupModal();
                return;
            }

            const syncBtn = document.getElementById('syncBtn');
            const syncIcon = document.getElementById('syncIcon');
            const syncText = document.getElementById('syncText');
            
            syncBtn.classList.add('syncing');
            syncIcon.classList.add('sync-icon');
            syncText.textContent = 'Syncing...';

            // Use Promise chain instead of async/await for better browser compatibility
            var projects = JSON.parse(localStorage.getItem(STORAGE_KEYS.projects) || '[]');
            var contacts = JSON.parse(localStorage.getItem(STORAGE_KEYS.contacts) || '[]');
            var images = JSON.parse(localStorage.getItem(STORAGE_KEYS.images) || '[]');

            // Create data.json content
            var dataJson = {
                projects: projects.map(function(project, index) {
                    return {
                        title: project.title,
                        type: project.type,
                        description: project.description,
                        link: project.link,
                        images: project.images.map(function(img, imgIndex) {
                            return 'projects/' + sanitizeFilename(project.title) + '/image-' + (imgIndex + 1) + '.jpg';
                        })
                    };
                }),
                contacts: contacts
            };

            // Upload data.json first
            uploadFileToGitHub(
                config,
                'data.json',
                JSON.stringify(dataJson, null, 2),
                'Update portfolio data'
            )
            .then(function() {
                // Upload project images sequentially
                var uploadPromises = [];
                
                projects.forEach(function(project, i) {
                    var folderName = sanitizeFilename(project.title);
                    
                    if (project.images && project.images.length > 0) {
                        project.images.forEach(function(imageData, j) {
                            var imagePath = 'projects/' + folderName + '/image-' + (j + 1) + '.jpg';
                            var base64Data = imageData.split(',')[1];
                            
                            uploadPromises.push(
                                uploadFileToGitHub(
                                    config,
                                    imagePath,
                                    base64Data,
                                    'Add image for ' + project.title,
                                    true
                                )
                            );
                        });
                    }
                });
                
                return Promise.all(uploadPromises);
            })
            .then(function() {
                showMessage('‚úÖ Successfully synced to GitHub!', 'success');
                updateSyncStatus('success');
            })
            .catch(function(error) {
                console.error('Sync error:', error);
                showMessage('‚ùå Sync failed: ' + error.message, 'error');
            })
            .finally(function() {
                syncBtn.classList.remove('syncing');
                syncIcon.classList.remove('sync-icon');
                syncText.textContent = 'Sync to GitHub';
            });
        }

        // Upload file to GitHub via API (Promise-based for cross-browser compatibility)
        function uploadFileToGitHub(config, path, content, message, isBase64) {
            isBase64 = isBase64 || false;
            var url = 'https://api.github.com/repos/' + config.username + '/' + config.repo + '/contents/' + path;
            
            // Check if file exists to get SHA
            return safeFetch(url, {
                headers: {
                    'Authorization': 'token ' + config.token,
                    'Accept': 'application/vnd.github.v3+json'
                }
            })
            .then(function(checkResponse) {
                if (checkResponse.ok) {
                    return checkResponse.json();
                }
                return null;
            })
            .catch(function() {
                return null;
            })
            .then(function(existingFile) {
                // Upload/Update file
                var body = {
                    message: message,
                    content: isBase64 ? content : btoa(unescape(encodeURIComponent(content))),
                    branch: config.branch || 'main'
                };

                if (existingFile && existingFile.sha) {
                    body.sha = existingFile.sha;
                }

                return safeFetch(url, {
                    method: 'PUT',
                    headers: {
                        'Authorization': 'token ' + config.token,
                        'Accept': 'application/vnd.github.v3+json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(body)
                });
            })
            .then(function(response) {
                if (!response.ok) {
                    return response.json().then(function(error) {
                        throw new Error(error.message || 'Failed to upload file');
                    });
                }
                return response.json();
            });
        }

        // Utility: Sanitize filename
        function sanitizeFilename(name) {
            return name
                .toLowerCase()
                .replace(/[^a-z0-9]+/g, '-')
                .replace(/^-|-$/g, '');
        }

        // Image Upload and Cropping
        function handleImageUpload(event) {
            const files = event.target.files;
            
            Array.from(files).forEach(file => {
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    
                    reader.onload = (e) => {
                        currentImageForCrop = e.target.result;
                        showCropModal(file.name);
                    };
                    
                    reader.readAsDataURL(file);
                }
            });

            event.target.value = '';
        }

        function showCropModal(filename) {
            const cropImageElement = document.getElementById('cropImage');
            cropImageElement.src = currentImageForCrop;
            
            document.getElementById('croppedImageName').value = filename;
            document.getElementById('cropModal').classList.add('active');
            
            setTimeout(() => {
                if (cropper) {
                    cropper.destroy();
                }
                
                cropper = new Cropper(cropImageElement, {
                    aspectRatio: 9 / 12, // Portrait ratio for project cards
                    viewMode: 2,
                    autoCropArea: 1,
                    responsive: true,
                    background: false
                });
            }, 100);
        }

        function saveCroppedImage() {
            if (!cropper || !currentImageForCrop) return;
            
            const canvas = cropper.getCroppedCanvas({
                width: 540,
                height: 720
            });
            
            const croppedImageData = canvas.toDataURL('image/jpeg', 0.9);
            const name = document.getElementById('croppedImageName').value.trim();
            
            const imageData = {
                name: name || `image-${Date.now()}.jpg`,
                data: croppedImageData,
                timestamp: Date.now()
            };
            
            const images = JSON.parse(localStorage.getItem(STORAGE_KEYS.images) || '[]');
            images.push(imageData);
            localStorage.setItem(STORAGE_KEYS.images, JSON.stringify(images));
            
            loadImages();
            updateStats();
            closeModal('cropModal');
            showMessage('Image saved successfully!', 'success');
            
            if (cropper) {
                cropper.destroy();
                cropper = null;
            }
        }

        function loadImages() {
            const images = JSON.parse(localStorage.getItem(STORAGE_KEYS.images) || '[]');
            const gallery = document.getElementById('imageGallery');
            
            if (images.length === 0) {
                gallery.innerHTML = '<p style="text-align: center; color: var(--text-secondary); grid-column: 1/-1;">No images yet. Upload some images to get started!</p>';
                return;
            }
            
            gallery.innerHTML = images.map((img, index) => `
                <div class="gallery-item">
                    <img src="${img.data}" alt="${img.name}">
                    <div class="gallery-item-actions">
                        <button class="gallery-action-btn" onclick="deleteImage(${index})">üóëÔ∏è</button>
                    </div>
                </div>
            `).join('');
        }

        function deleteImage(index) {
            if (confirm('Delete this image?')) {
                const images = JSON.parse(localStorage.getItem(STORAGE_KEYS.images) || '[]');
                images.splice(index, 1);
                localStorage.setItem(STORAGE_KEYS.images, JSON.stringify(images));
                loadImages();
                updateStats();
                showMessage('Image deleted', 'success');
            }
        }

        // Project Management
        function loadProjects() {
            const projects = JSON.parse(localStorage.getItem(STORAGE_KEYS.projects) || '[]');
            const projectsList = document.getElementById('projectsList');
            
            if (projects.length === 0) {
                projectsList.innerHTML = '<p style="text-align: center; color: var(--text-secondary);">No projects yet. Click "Add New Project" to get started!</p>';
                return;
            }
            
            projectsList.innerHTML = projects.map((project, index) => `
                <div class="item-card">
                    <div class="item-header">
                        <h3 class="item-title">${project.title}</h3>
                        <span class="item-type">${project.type}</span>
                    </div>
                    <p class="item-description">${project.description}</p>
                    ${project.images && project.images.length > 0 ? `
                        <div class="item-images">
                            ${project.images.slice(0, 4).map(img => `
                                <img src="${img}" class="item-image-preview">
                            `).join('')}
                            ${project.images.length > 4 ? `<span style="font-size: 12px; color: var(--text-secondary);">+${project.images.length - 4} more</span>` : ''}
                        </div>
                    ` : ''}
                    ${project.link ? `<p style="font-size: 13px; color: var(--accent); margin-bottom: 12px;">üîó ${project.link}</p>` : ''}
                    <div class="item-actions">
                        <button class="item-btn item-btn-edit" onclick="editProject(${index})">‚úèÔ∏è Edit</button>
                        <button class="item-btn item-btn-delete" onclick="deleteProject(${index})">üóëÔ∏è Delete</button>
                    </div>
                </div>
            `).join('');
        }

        function showAddProjectModal() {
            editingProjectIndex = -1;
            document.getElementById('projectModalTitle').textContent = 'Add New Project';
            document.getElementById('projectTitle').value = '';
            document.getElementById('projectType').value = '';
            document.getElementById('projectDescription').value = '';
            document.getElementById('projectLink').value = '';
            
            renderImageSelection('projectImageSelection', []);
            document.getElementById('projectModal').classList.add('active');
        }

        function editProject(index) {
            editingProjectIndex = index;
            const projects = JSON.parse(localStorage.getItem(STORAGE_KEYS.projects) || '[]');
            const project = projects[index];
            
            document.getElementById('projectModalTitle').textContent = 'Edit Project';
            document.getElementById('projectTitle').value = project.title;
            document.getElementById('projectType').value = project.type;
            document.getElementById('projectDescription').value = project.description;
            document.getElementById('projectLink').value = project.link || '';
            
            renderImageSelection('projectImageSelection', project.images || []);
            document.getElementById('projectModal').classList.add('active');
        }

        function saveProject() {
            const title = document.getElementById('projectTitle').value.trim();
            const type = document.getElementById('projectType').value.trim();
            const description = document.getElementById('projectDescription').value.trim();
            const link = document.getElementById('projectLink').value.trim();
            
            if (!title || !type || !description) {
                showMessage('Please fill in all required fields', 'error');
                return;
            }
            
            const selectedImages = getSelectedImages('projectImageSelection');
            
            const projectData = {
                title,
                type,
                description,
                link,
                images: selectedImages
            };
            
            const projects = JSON.parse(localStorage.getItem(STORAGE_KEYS.projects) || '[]');
            
            if (editingProjectIndex >= 0) {
                projects[editingProjectIndex] = projectData;
            } else {
                projects.push(projectData);
            }
            
            localStorage.setItem(STORAGE_KEYS.projects, JSON.stringify(projects));
            
            closeModal('projectModal');
            loadProjects();
            updateStats();
            showMessage('Project saved! Click "Sync to GitHub" to publish.', 'success');
            updateSyncStatus('warning');
        }

        function deleteProject(index) {
            if (confirm('Delete this project?')) {
                const projects = JSON.parse(localStorage.getItem(STORAGE_KEYS.projects) || '[]');
                projects.splice(index, 1);
                localStorage.setItem(STORAGE_KEYS.projects, JSON.stringify(projects));
                loadProjects();
                updateStats();
                showMessage('Project deleted', 'success');
                updateSyncStatus('warning');
            }
        }

        // Contact Management
        function loadContacts() {
            const contacts = JSON.parse(localStorage.getItem(STORAGE_KEYS.contacts) || '[]');
            const contactsList = document.getElementById('contactsList');
            
            if (contacts.length === 0) {
                contactsList.innerHTML = '<p style="text-align: center; color: var(--text-secondary);">No contacts yet. Click "Add New Contact" to get started!</p>';
                return;
            }
            
            contactsList.innerHTML = contacts.map((contact, index) => `
                <div class="item-card">
                    <div class="item-header">
                        <h3 class="item-title">${contact.icon} ${contact.label}</h3>
                    </div>
                    <p class="item-description">${contact.value}</p>
                    <p style="font-size: 13px; color: var(--accent); margin-bottom: 12px;">üîó ${contact.link}</p>
                    <div class="item-actions">
                        <button class="item-btn item-btn-edit" onclick="editContact(${index})">‚úèÔ∏è Edit</button>
                        <button class="item-btn item-btn-delete" onclick="deleteContact(${index})">üóëÔ∏è Delete</button>
                    </div>
                </div>
            `).join('');
        }

        function showAddContactModal() {
            editingContactIndex = -1;
            document.getElementById('contactModalTitle').textContent = 'Add New Contact';
            document.getElementById('contactIcon').value = '';
            document.getElementById('contactLabel').value = '';
            document.getElementById('contactValue').value = '';
            document.getElementById('contactLink').value = '';
            
            document.getElementById('contactModal').classList.add('active');
        }

        function editContact(index) {
            editingContactIndex = index;
            const contacts = JSON.parse(localStorage.getItem(STORAGE_KEYS.contacts) || '[]');
            const contact = contacts[index];
            
            document.getElementById('contactModalTitle').textContent = 'Edit Contact';
            document.getElementById('contactIcon').value = contact.icon;
            document.getElementById('contactLabel').value = contact.label;
            document.getElementById('contactValue').value = contact.value;
            document.getElementById('contactLink').value = contact.link;
            
            document.getElementById('contactModal').classList.add('active');
        }

        function saveContact() {
            const icon = document.getElementById('contactIcon').value.trim();
            const label = document.getElementById('contactLabel').value.trim();
            const value = document.getElementById('contactValue').value.trim();
            const link = document.getElementById('contactLink').value.trim();
            
            if (!icon || !label || !value || !link) {
                showMessage('Please fill in all fields', 'error');
                return;
            }
            
            const contactData = { icon, label, value, link };
            const contacts = JSON.parse(localStorage.getItem(STORAGE_KEYS.contacts) || '[]');
            
            if (editingContactIndex >= 0) {
                contacts[editingContactIndex] = contactData;
            } else {
                contacts.push(contactData);
            }
            
            localStorage.setItem(STORAGE_KEYS.contacts, JSON.stringify(contacts));
            
            closeModal('contactModal');
            loadContacts();
            updateStats();
            showMessage('Contact saved! Click "Sync to GitHub" to publish.', 'success');
            updateSyncStatus('warning');
        }

        function deleteContact(index) {
            if (confirm('Delete this contact?')) {
                const contacts = JSON.parse(localStorage.getItem(STORAGE_KEYS.contacts) || '[]');
                contacts.splice(index, 1);
                localStorage.setItem(STORAGE_KEYS.contacts, JSON.stringify(contacts));
                loadContacts();
                updateStats();
                showMessage('Contact deleted', 'success');
                updateSyncStatus('warning');
            }
        }

        // Image Selection
        function renderImageSelection(containerId, selectedImages = []) {
            const images = JSON.parse(localStorage.getItem(STORAGE_KEYS.images) || '[]');
            const container = document.getElementById(containerId);
            
            if (images.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-secondary); grid-column: 1/-1;">No images available. Upload images first!</p>';
                return;
            }
            
            container.innerHTML = images.map((img, index) => `
                <div class="selectable-image ${selectedImages.includes(img.data) ? 'selected' : ''}" 
                     onclick="toggleImageSelection(this, '${img.data}', '${containerId}')">
                    <img src="${img.data}" alt="${img.name}">
                    <div class="image-check">‚úì</div>
                </div>
            `).join('');
        }

        function toggleImageSelection(element, imageData, containerId) {
            element.classList.toggle('selected');
        }

        function getSelectedImages(containerId) {
            const container = document.getElementById(containerId);
            const selectedElements = container.querySelectorAll('.selectable-image.selected img');
            return Array.from(selectedElements).map(img => img.src);
        }

        // Modal Functions
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            
            if (modalId === 'cropModal' && cropper) {
                cropper.destroy();
                cropper = null;
            }
        }

        // Stats
        function updateStats() {
            const projects = JSON.parse(localStorage.getItem(STORAGE_KEYS.projects) || '[]');
            const contacts = JSON.parse(localStorage.getItem(STORAGE_KEYS.contacts) || '[]');
            const images = JSON.parse(localStorage.getItem(STORAGE_KEYS.images) || '[]');
            
            document.getElementById('projectCount').textContent = projects.length;
            document.getElementById('contactCount').textContent = contacts.length;
            document.getElementById('imageCount').textContent = images.length;
        }

        // Messages
        function showMessage(message, type = 'success') {
            const container = document.getElementById('messageContainer');
            const messageEl = document.createElement('div');
            messageEl.className = `message ${type} show`;
            messageEl.textContent = message;
            
            container.appendChild(messageEl);
            
            setTimeout(() => {
                messageEl.classList.remove('show');
                setTimeout(() => messageEl.remove(), 300);
            }, 3000);
        }

        // Close modals on background click
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal(modal.id);
                }
            });
        });
    </script>
</body>
  </html>
